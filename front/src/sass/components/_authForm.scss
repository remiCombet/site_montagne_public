@use '../utils/variables' as vars;
@use '../utils/mixins' as mix;

// Styles pour les formulaires d'authentification
.auth-form {
    margin-bottom: vars.$spacing-xl;
    position: relative;
    
    .floating-input-container {
      position: relative;
      margin-bottom: vars.$spacing-lg;
      
      // Version simplifiée pour la gestion du z-index
      &.field-focused {
        z-index: vars.$z-index-dropdown;
      }
      
      input {
        width: 100%;
        padding: vars.$input-padding;
        border: none;
        border-radius: vars.$border-radius;
        box-sizing: border-box;
        
        &:focus {
            outline: none;
        }
          
        &::placeholder {
          color: transparent;
        }
      }
      
      label {
        position: absolute;
        left: vars.$input-padding;
        top: vars.$input-padding;
        transition: all vars.$transition-speed ease;
        pointer-events: none;
        padding: 0 vars.$spacing-xs;
        font-size: vars.$font-size-base;
      }
      
      // Effet de label flottant
      input:focus ~ label,
      input:not(:placeholder-shown) ~ label {
        transform: translateY(vars.$label-offset-y) translateX(vars.$label-offset-x);
        color: vars.$primary-color;
        z-index: 2;
        font-weight: 800;
        font-size: 0.85rem;
        transition: all vars.$transition-speed ease;

        text-shadow: 
            0px 0px 3px rgba(255, 255, 255, 0.8),
            0px 0px 1px rgba(255, 255, 255, 1);
      }
      
      // Bordure animée
      .input-border {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: vars.$border-thickness;
        background-color: vars.$primary-color;
        transition: width vars.$transition-speed ease;
        z-index: 1;
      }
      
      // Animation de la bordure
      input:focus ~ .input-border {
        width: 100%;
      }

      // Style pour le bouton d'affichage/masquage du mot de passe
      .password-toggle {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: transparent;
        border: none;
        color: vars.$text-color;
        cursor: pointer;
        font-size: 1.1rem;
        padding: 5px;
        z-index: 20; // Z-index encore plus élevé
        opacity: 0.7;
        transition: opacity 0.2s ease;
        
        // Important: limiter la portée du bouton à l'input
        display: block;
        
        // Spécificité importante pour surcharger toute autre règle
        &.password-toggle {
          position: absolute !important;
          top: 25px !important; // Position fixe depuis le haut du conteneur
          bottom: auto !important; // Ne pas positionner par rapport au bas
        }
        
        &:hover, &:focus {
          opacity: 1;
          outline: none;
        }
      }
    }
  }
  
  // Messages d'erreur/succès
  .auth-message {
    &.error {
      @include mix.alert-box(vars.$error-color);
    }
    
    &.success {
      @include mix.alert-box(vars.$success-color);
    }
  }